function validateInvoice(i){$("#invoiceform").validate({ignore:[],focusInvalid:!1,rules:{"validation-fname":{required:!0},"validation-email":{required:!0,email:!0},"validation-invnumber":{required:!0},"validation-ponumber":{required:!0},"validation-invdate":{required:!0},"validation-duedate":{required:!0},"validation-currency":{required:!0},"validation-category":{required:!0},"validation-subcategory":{required:!0},"validation-price":{required:!0},"validation-qty":{required:!0}},errorPlacement:function(e,t){return $(t).siblings(".validation-error").removeClass("d-none"),!0},highlight:function(e){$(e).parents(".form-group").addClass("invalid-field")},unhighlight:function(e){$(e).parents(".form-group").removeClass("invalid-field"),$(e).siblings(".validation-error").addClass("d-none")},submitHandler:function(e){var t=$(e).serializeArray(),a={};$(t).each(function(e,t){a[t.name]=t.value}),i.invoiceData.push(a),recountPrice(i.invoiceData,i.priceMapper),$("#invoice-table").hasClass("d-none")&&$("#invoice-table").removeClass("d-none"),$("html,body").animate(function(){$("#invoice-table").offset().top},500),console.log("profile form submitted data ===>",i.invoiceData),$(e)[0].reset(),$(".select2").select2(""),i.invDate.clear(),i.dueDate.clear()}})}function recountPrice(e,a){$("#invoice-table tbody").html("");var i=0,t="$";e.length&&(t=e[0]["validation-currency"]),$(e).each(function(e,t){generateHTML(t,e,a),i+=parseInt(t["validation-qty"])*parseInt(t["validation-price"])});e='<tr><td colspan="4" class="text-end">Sub Total</td><td class="text-end">'+(t=a[t.toLowerCase()]?a[t.toLowerCase()]:"")+i+'</td></tr><tr><td colspan="4" class="border-0 text-end"><strong>Shipping</strong></td><td class="border-0 text-end">$0</td></tr><tr><td colspan="4" class="border-0 text-end"><strong>Total</strong></td><td class="border-0 text-end"><h4 class="m-0">'+t+i+"</h4></td></tr>",e=$.parseHTML(e);$("#invoice-table tbody").append(e),"0"==i&&$("#invoice-table").addClass("d-none")}function generateHTML(e,t,a){a='<tr><td class="editorHTML">'+e["validation-fname"]+" "+e["validation-lname"]+"</td><td>"+e["validation-price"]+"</td><td>"+e["validation-qty"]+'</td><td class="text-end">'+a[e["validation-currency"].toLowerCase()]+Math.floor(parseInt(e["validation-qty"])*parseInt(e["validation-price"]))+'</td><td class="remove-item text-center"><button class="btn avatar avatar-xs bg-soft-danger text-danger me-0" data-effect="wave" data-id="'+t+'"><i class="bx bx-x fs-sm"></i></button></td>',a=$.parseHTML(a);$(a).find(".editorHTML").find("h1, h2, h3, h4, h5, h6").addClass("fs-16 mb-2"),$(a).find(".editorHTML").find("p").addClass("text-muted mb-0"),$("#invoice-table tbody").append(a)}!function(t){var e,a={invoiceData:[],priceMapper:{usd:"$",inr:"R",ar:"A",cd:"$",euro:"U"}};t("#invdate").length&&(e=t("#invdate").flatpickr({disableMobile:!0}),a.invDate=e),t("#upload-logo").click(function(){t("#logo").trigger("click")}),t("#logo").on("change",function(e){t("#upload-logo input").val(t(this).val())}),t(".select2").select2().on("change",function(){""!==t(this).val()&&t(this).siblings(".validation-error").addClass("d-none")}),t("#duedate").length&&(e=t("#duedate").flatpickr({disableMobile:!0}),a.dueDate=e),t("#reset-invoice-form").on("click",function(){t("#invoiceform")[0].reset(),t(".select2").select2(""),a.invDate.clear(),a.dueDate.clear(),t("#invoiceform").find(".validation-error").addClass("d-none")}),t(document).on("click",".remove-item",function(){var e=t(this).children(".btn").attr("data-id");a.invoiceData.splice(e,1),recountPrice(a.invoiceData,a.priceMapper),t(this).closest("tr").remove()}),validateInvoice(a)}(jQuery);